"use strict";(self.webpackChunkE_commerece=self.webpackChunkE_commerece||[]).push([[953],{7953:(p,u,c)=>{c.r(u),c.d(u,{WishListComponent:()=>E});var _=c(6814),h=c(1120),m=c(8129),t=c(4769),n=c(9196),g=c(2425),a=c(6286);function l(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.addWish(r._id))}),t.qZA()}}function f(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.removeWish(r._id))}),t.qZA()}}const v=function(s){return["/details",s]};function C(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.YNc(2,l,1,0,"i",8),t.YNc(3,f,1,0,"i",9),t.TgZ(4,"header",10),t._UZ(5,"img",11),t.TgZ(6,"h4",12),t._uU(7),t.qZA(),t.TgZ(8,"h5",13),t._uU(9),t.ALo(10,"cuttext"),t.qZA(),t.TgZ(11,"div",14)(12,"span",15),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"p",16),t._UZ(16,"i",17),t.TgZ(17,"span",18),t._uU(18),t.qZA()()()(),t.TgZ(19,"footer")(20,"button",19,20),t.NdJ("click",function(){const o=t.CHM(e).$implicit,D=t.MAs(21),L=t.oxw(2);return t.KtG(L.addProduct(o._id,D))}),t._uU(22," + Add To Cart "),t.qZA()()()()}if(2&s){const e=d.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!i.wishListData.includes(e._id)),t.xp6(1),t.Q6J("ngIf",i.wishListData.includes(e._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(16,v,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title)("title",e.title),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.hij(" ",t.xi3(10,10,e.title,2)," "),t.xp6(4),t.Oqu(t.xi3(14,13,e.price,"E\xa3 ")),t.xp6(5),t.hij(" ",e.ratingsAverage,"")}}function x(s,d){if(1&s&&(t.TgZ(0,"section",2)(1,"h2",3),t._uU(2,"Popular Product"),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,C,23,18,"div",5),t.qZA()()),2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.productsData)}}function T(s,d){1&s&&(t.TgZ(0,"h2",23),t._uU(1,"You haven't added your wish products yet..."),t.qZA())}let E=(()=>{class s{constructor(e,i,r,o){this._WishlistService=e,this._ToastrService=i,this._CartService=r,this._Renderer2=o,this.productsData=[],this.wishListData=[]}ngOnInit(){this._WishlistService.getWishList().subscribe({next:e=>{this.productsData=e.data;const i=e.data.map(r=>r._id);this.wishListData=i}})}addProduct(e,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addToCart(e).subscribe({next:r=>{this._CartService.cartNumber.next(r.numOfCartItems),this._ToastrService.success(r.message,"Your FreshCart App"),this._Renderer2.removeAttribute(i,"disabled")},error:r=>{this._Renderer2.removeAttribute(i,"disabled")}})}addWish(e){this._WishlistService.addToWish(e).subscribe({next:i=>{this._ToastrService.success(i.message),this.wishListData=i.data}})}removeWish(e){this._WishlistService.removeWish(e).subscribe({next:i=>{this._ToastrService.success(i.message),this.wishListData=i.data;const r=this.productsData.filter(o=>this.wishListData.includes(o._id));this.productsData=r}})}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(n.M),t.Y36(g._W),t.Y36(a.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["id","products",4,"ngIf","ngIfElse"],["msg",""],["id","products"],[1,"text-center","my-5"],[1,"row","g-4","my-5"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","p-2","overflow-hidden","h-100","position-relative"],["class","fa-regular fa-heart position-absolute heart z-1","role","button",3,"click",4,"ngIf"],["class","fa-solid fa-heart-crack position-absolute heart text-danger z-1","role","button",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"h6","text-main"],[1,"h5","my-3","small"],[1,"product-footer","d-flex","align-items-center","justify-content-between","mt-2"],[1,"small"],[1,"m-0"],[1,"fas","fa-star","rating-color","me-1"],[1,"text-muted"],[1,"main-btn","my-2","w-100",3,"click"],["addBtn",""],["role","button",1,"fa-regular","fa-heart","position-absolute","heart","z-1",3,"click"],["role","button",1,"fa-solid","fa-heart-crack","position-absolute","heart","text-danger","z-1",3,"click"],[1,"text-center","my-2"]],template:function(i,r){if(1&i&&(t.YNc(0,x,5,1,"section",0),t.YNc(1,T,2,0,"ng-template",null,1,t.W1O)),2&i){const o=t.MAs(2);t.Q6J("ngIf",r.productsData.length>0)("ngIfElse",o)}},dependencies:[_.ez,_.sg,_.O5,_.H9,h.rH,m.r]})}return s})()},6286:(p,u,c)=>{c.d(u,{N:()=>t});var _=c(5619),h=c(4769),m=c(9862);let t=(()=>{class n{constructor(a){this._HttpClient=a,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new _.X(0)}addToCart(a){return this._HttpClient.post(this.baseUrl+"cart",{productId:a})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(a){return this._HttpClient.delete(this.baseUrl+`cart/${a}`)}updateCartItem(a,l){return this._HttpClient.put(this.baseUrl+`cart/${a}`,{count:l})}clearCartItems(){return this._HttpClient.delete(this.baseUrl+"cart")}static#t=this.\u0275fac=function(l){return new(l||n)(h.LFG(m.eN))};static#e=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);